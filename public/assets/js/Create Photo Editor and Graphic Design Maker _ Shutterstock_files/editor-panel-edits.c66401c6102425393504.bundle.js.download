(this.webpackJsonp=this.webpackJsonp||[]).push([[54,50],{"4exy":function(e,t,n){"use strict";var i=n("JPst"),a=n.n(i)()((function(e){return e[1]}));a.push([e.i,'.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp{display:grid;grid-gap:0 10px;grid-template-columns:[edge-left] 80px [inner-left] auto [inner-right] 80px [edge-right] 37px;grid-template-rows:23px 30px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp label{margin:0}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp button{padding:0;margin-left:5px;width:32px;height:32px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp .src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-iaN6c{height:30px;color:#0c121c;text-align:center;font-family:"Roboto","sans-serif";font-style:normal;font-weight:400;font-size:14px;letter-spacing:.2px;line-height:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;line-height:30px}.src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp input{width:100%}',""]),a.locals={dimensions:"src-editor-components-tool_bar-panels-basic_edits--crop-module-dimensions-cvJSp",divider:"src-editor-components-tool_bar-panels-basic_edits--crop-module-divider-iaN6c"},t.a=a},Eihm:function(e,t,n){"use strict";n.r(t),n.d(t,"CropPanel",(function(){return W})),n.d(t,"RotatePanel",(function(){return ie})),n.d(t,"ColorsFxPanel",(function(){return ye})),n.d(t,"ExposureFxPanel",(function(){return ke})),n.d(t,"ResizePanel",(function(){return Ge})),n.d(t,"CurvesFxPanel",(function(){return Ze.default})),n.d(t,"LevelsFxPanel",(function(){return wt})),n.d(t,"SharpenFxPanel",(function(){return _t})),n.d(t,"DodgeFxPanel",(function(){return Wt})),n.d(t,"BurnFxPanel",(function(){return Qt}));var i=n("Gkqz"),a=n("q1tI"),s=n("/MKj"),o=n("hrAu"),r=n("Jm8X"),h=n("3UhY"),c=n("U03b"),l=n("oTty"),d=n("FWLE"),u=n("8BZ1"),p=n("8ckf"),m=n("ribA"),g=n("FL8F"),b=n("Dz4/"),f=n("8KIJ"),w=n("jpIK"),v=n("BZ7e"),x=n("SeV6"),O=n("LboF"),j=n.n(O),_=n("4exy"),C={insert:"head",singleton:!1},D=(j()(_.a,C),_.a.locals||{}),y=n("tLTz"),P=n("LC5x"),S=n("jqCj"),E=n("jyzh"),M=n("NVhL"),k=n("JUFo"),A=n("LvDl"),I=n("25As"),F=n("Hg4B"),B=n("3F5Q");const z=n("v/vF");function L(){return[Object(i.e)("toolBar","no_fixed_proportions"),Object(i.e)("toolBar","original_proportions"),...z.map(e=>Object(B.a)(e.name)),Object(i.e)("toolBar","width_x_height",{WIDTH:screen.width,HEIGHT:screen.height})]}function R(e,t){if(0===e)return 0;if(1===e)return v.a.x(t)/v.a.y(t);const n=z[e-2];return n.width/n.height}function H(e){return{presetIndex:0,width:""+e.width,height:""+e.height,targetSize:null}}class V extends a.Component{constructor(e){super(e),this.widthChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,n);const e=T(this.state.presetIndex),a=R(this.state.presetIndex,this.props.documentSize);let s=a?Math.max(Math.round(i/a),1):this.props.height;if(s>t){const e=t/s;s=t,i=Math.round(i*e)}a||e?this.setState({width:""+i,height:""+s}):this.setState({width:""+i,height:""+s,presetIndex:0,targetSize:null}),this.props.setCropDimensions(i/s,v.a.create(i,s),!e,this.props.shouldConstrainCrop)}},this.heightChange=e=>{const{maxHeight:t,maxWidth:n}=this.props;let i=e.target.value;if(this.isValidDimension(i)){i=Math.min(i,t);const e=T(this.state.presetIndex),a=R(this.state.presetIndex,this.props.documentSize);let s=a?Math.max(Math.round(i*a),1):this.props.width;if(s>n){const e=n/s;s=n,i=Math.round(i*e)}a||e?this.setState({width:""+s,height:""+i}):this.setState({width:""+s,height:""+i,presetIndex:0,targetSize:null}),this.props.setCropDimensions(s/i,v.a.create(s,i),!e,this.props.shouldConstrainCrop)}},this.onPresetSelect=e=>{const t=L(),n=parseInt(e,10);this.setState({presetIndex:n});let i=t[n];if(n<2&&(i=null),this.props.onPresetSelect(i),0===n)this.props.toggleCropRatioLock(!1);else if(1===n){const{dx:e,dy:t}=v.a.toSize(this.props.documentSize),n=e/t;this.props.setCropDimensions(n,null,!0,!0)}else if(n===t.length-1){const e=v.a.create(screen.width,screen.height),t=e[0]/e[1];this.props.setCropDimensions(t,null,!0,!0),this.setState({targetSize:e}),this.props.setScalePhoto(e)}else{const e=z[n-2],{width:t,height:i,scaleDocument:a}=e;this.props.setCropDimensions(t/i,null,!0,!0);const s=a?v.a.create(t,i):null;this.setState({targetSize:s}),this.props.setScalePhoto(s)}},this.toggleScalePhoto=(e,t=!1)=>{!t&&this.onPresetSelect("0");const n=t?v.a.create(this.props.width,this.props.height):null;this.setState({targetSize:n}),this.props.setScalePhoto(n),this.props.toggleCropRatioLock(t)},this.onOpen=()=>{this.setState(H(this.props)),this.props.onOpen()},this.getMaxWidth=()=>this.state.targetSize?Object(I.j)():this.props.maxWidth,this.getMaxHeight=()=>this.state.targetSize?Object(I.j)():this.props.maxHeight,this.state=H(e)}componentDidUpdate(e){e.width===this.props.width&&e.height===this.props.height||this.setState({width:""+this.props.width,height:""+this.props.height})}isValidDimension(e){const t=parseInt(e,10);return""+t===e&&null!=t&&t>0}render(){const{onApply:e,flipCropBox:t,shouldConstrainCrop:n}=this.props,s=L();return a.createElement(o.a,{title:Object(i.e)("tools","crop_canvas"),panelId:F.b.crop,onOpen:this.onOpen,onApply:e,layerEffectType:P.a.global},a.createElement(f.b,{label:Object(i.e)("toolBar","aspect_ratio"),onChange:this.onPresetSelect,name:"cropPresets"},s.map((e,t)=>a.createElement(p.a,{key:t,selected:t===this.state.presetIndex,value:t,label:e}))),a.createElement(r.a,null,a.createElement("div",{className:D.dimensions},a.createElement(h.a,{htmlFor:"txtCropWidth"},Object(i.e)("toolBar","width")),a.createElement("div",null),a.createElement(h.a,{htmlFor:"txtCropHeight"},Object(i.e)("toolBar","height")),a.createElement("div",null),a.createElement(c.a,{name:"txtCropWidth",value:this.state.width,onChange:this.widthChange,maxValue:this.getMaxWidth(),units:y.b.pixels,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),a.createElement("div",{className:D.divider},"✕"),a.createElement(c.a,{name:"txtCropHeight",value:this.state.height,onChange:this.heightChange,maxValue:this.getMaxHeight(),units:y.b.pixels,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),a.createElement(u.b,{for:"btn-crop-rotate",text:Object(i.e)("toolBar","rotate_crop"),offset:{dx:0,dy:-3}}),a.createElement(d.a,{id:"btn-crop-rotate",onClick:Object(A.partial)(t,n)},a.createElement(x.default,null)))),a.createElement(l.b,{name:"scalePhoto",label:Object(i.e)("toolBar","scale_photo"),value:null!==this.state.targetSize,onChange:this.toggleScalePhoto}))}}function T(e){return 0===e}var W=Object(s.b)((function(e){const t=Object(w.getCropSelection)(e);let n=v.a.zeroes;t&&(n=t.targetSize||Object(w.getCropSelectionSize)(e));const i=Math.round(v.a.dx(n)),a=Math.round(v.a.dy(n)),s=Object(w.getDocumentSize)(e),o=Object(w.getBackgroundNode)(e);let r;o&&(r=Object(w.getNodeBounds)(e,o.id));const h=r||S.g.fromSize(v.a.create(Object(I.j)(),Object(I.j)()),v.a.zeroes),c=Object(M.getCropSelectionBounds)(e.scene),l=!!r&&Object(M.backgroundCoversCanvas)(r,s);let d=Object(I.j)(),u=Object(I.j)();const p=l&&!Object(k.lb)(o);return p&&c&&(d=Object(E.c)(c,h),u=Object(E.b)(c,h)),{width:i,height:a,documentSize:s,maxWidth:Math.round(d),maxHeight:Math.round(u),shouldConstrainCrop:p}}),(function(e){return{onOpen:()=>{e(Object(m.updateEditMode)(b.a.canvasCrop))},onApply:()=>{e(g.b.scene.applyCrop())},setCropDimensions:(t,n,i,a)=>{e(g.b.scene.setCropDimensions(t,n,i,a))},toggleCropRatioLock:t=>{e(g.b.scene.setCropLock(t))},flipCropBox:t=>{e(g.b.scene.flipCropBox(t))},setScalePhoto:t=>{e(g.b.scene.setCropTargetSize(t))},onPresetSelect:t=>{e(g.b.sagas.setCropPreset(t))}}}))(V),U=n("Yh64"),N=n("gjD4"),G=n("TUER"),Z=n("91J9"),X=n("C0xJ"),q=n("Xnc83"),J=n("SPKF");const K={shouldShowGrid:!1,angle:0};function Y(e){return Q(e).toString()+"º"}function Q(e){return Math.round(e)/100}function $(e,t,n){const i=n?0:1;return-1*e.A[i]===t.A[i]&&-1*e.B[i]===t.B[i]&&-1*e.C[i]===t.C[i]&&-1*e.D[i]===t.D[i]}function ee(e,t){return!!Object(A.inRange)(e,-t,t)||Math.abs(Math.abs(e)-Math.abs(t))<.01}class te extends a.Component{constructor(e){super(e),this.state=Object.assign({},K),this.onOpen=()=>{this.setState(Object.assign(Object.assign({},K),{shouldShowGrid:this.props.shouldShowGrid})),this.props.onOpen()},this.handleStraightenChange=(e,t,n)=>{t/=100;const{angle:i}=this.state,a=t-i;this.setState({angle:t},()=>{const e=a*Math.PI/180;this.props.straightenDocument(e),n&&this.props.commit()})},this.onStraightenDragEnd=()=>{this.props.onStraightenDragEnd(this.state.shouldShowGrid)},this.initialAngle=e.documentAngle}componentDidUpdate(e,t){const{targetRect:n,documentAngle:i}=this.props,a=Math.round(i-e.documentAngle);if(a&&a%90==0||!e.targetRect||!n)return;let s=t.angle;const o=i-this.initialAngle,r=$(e.targetRect,n,!0),h=$(e.targetRect,n,!1);r||h?s*=-1:ee(o,5)?s=o:ee(o-90,5)?s=o-90:ee(o-180,5)?s=o-180:ee(o-270,5)?s=o-270:ee(o+90,5)&&(s=o+90),s!==t.angle&&this.setState({angle:s})}render(){const{onApply:e,onStraightenDragStart:t,rotateLeft:n,rotateRight:s,flipHorizontal:r,flipVertical:h}=this.props,c=Q(100*this.state.angle*100);return a.createElement(o.a,{title:Object(i.e)("editor","rotate_canvas"),panelId:F.b.rotate,onOpen:this.onOpen,onApply:e,layerEffectType:P.a.transform},a.createElement(u.b,{for:"canvas_rotate_left"},Object(i.e)("editor","rotate_counterclockwise")),a.createElement(u.b,{for:"canvas_rotate_right"},Object(i.e)("editor","rotate_clockwise")),a.createElement(u.b,{for:"canvas_flip_horizontal"},Object(i.e)("editor","flip_horizontally")),a.createElement(u.b,{for:"canvas_flip_vertical"},Object(i.e)("editor","flip_vertically")),a.createElement(N.a,null,a.createElement(X.default,{id:"canvas_rotate_left",name:"rotateLeft",onClick:n}),a.createElement(Z.default,{id:"canvas_rotate_right",name:"rotateRight",onClick:s}),a.createElement(q.default,{id:"canvas_flip_horizontal",name:"flipHorizontal",onClick:r}),a.createElement(J.default,{id:"canvas_flip_vertical",name:"flipVertical",onClick:h})),a.createElement(U.a,{name:"straighten",label:Object(i.e)("editor","straighten"),onChange:this.handleStraightenChange,value:c,min:-500,max:500,step:.01,formatter:Y,onSliderDragStart:t,onSliderDragEnd:this.onStraightenDragEnd,precision:100}))}}const ne={shouldShowGrid:!1,documentAngle:0,targetRect:S.g.unitRect};var ie=Object(s.b)((function(e){if(!(null!=e.ux.panelSelected&&"rotate"===e.ux.panelSelected.panelId))return ne;const t=w.getShowGrid(e),n=Object(G.a)(w.getDocumentAngle(e)),i=w.getBackgroundId(e);return{shouldShowGrid:t,documentAngle:n,targetRect:i?w.getNodeHoverBounds(e,i):null}}),(function(e){return{rotateLeft:()=>{e(g.b.scene.rotateLeft()),e(g.b.undo.softCommit())},rotateRight:()=>{e(g.b.scene.rotateRight()),e(g.b.undo.softCommit())},flipHorizontal:()=>{e(Object(g.d)(g.b.scene.flipHorizontal())),e(g.b.undo.softCommit())},flipVertical:()=>{e(Object(g.d)(g.b.scene.flipVertical())),e(g.b.undo.softCommit())},straightenDocument:t=>{0!==t&&e(Object(g.d)(g.b.scene.straightenDocument(t)))},onOpen:()=>e(g.b.editor.updateEditMode(b.a.rotate)),onApply:()=>{e(g.b.ux.applyPanel()),e(g.b.scene.centerDocument())},commit:()=>e(g.b.undo.softCommit()),onStraightenDragStart:()=>{e(g.b.editor.hideGrid()),e(g.b.scene.showStraighteningGrid())},onStraightenDragEnd:t=>{e(g.b.scene.hideStraighteningGrid()),t&&e(g.b.editor.showGrid())}}}))(te),ae=n("bBtN"),se=n("4sIT"),oe=n("2dk7"),re=n("m373"),he=n("ZIGy"),ce=n("W5vt"),le=n("e9FX"),de=n("NvXt"),ue=n("YGRI"),pe=n("TSYQ"),me=n.n(pe),ge=n("LhdP"),be=n("1Kt6"),fe=n("b340"),we=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const ve=F.b.colors;function xe(e){return oe.wb(e,-100,100,0,1)}function Oe(e){return oe.wb(e,0,1,-100,100)}function je(e){return oe.wb(e,-100,100,0,1)}function _e(e){return oe.wb(e,0,1,-100,100)}class Ce extends a.PureComponent{constructor(){super(...arguments),this.state={decoded:null,rgb:oe.sb},this.refInput=null,this.histogramReady=()=>{const{histograms:e}=this.props;return!!e&&!e.updating},this.setRefInput=e=>{this.refInput=e},this.whiteBalanceClick=()=>{const{isMaskPaletteOpen:e,isPicking:t,toggleMaskPalette:n,toggleWhiteBalancePicker:i}=this.props;e&&n(),t?this.unbindEventListeners():this.bindEventListeners(),i(!t,this.state.decoded)},this.updateTint=(e,t,n)=>this.props.updateFxAttr(e,t,n),this.autoAdjustClick=()=>{const{isPicking:e}=this.props;e&&this.whiteBalanceClick();const{histograms:t}=this.props;if(!t||t.updating)return;const n=Object(ge.c)(t.green),i=Object(ge.c)(t.blue),a=Object(ge.c)(t.red),s=oe.Cb(a/255,n/255*2-1,i/255*2-1,1),o=oe.Bb(s),r=oe.k(o);this.props.updateFxAttr("tint",Math.round(100*r.tint),!1),this.props.updateFxAttr("temperature",Math.round(100*r.temperature),!1),this.setState({rgb:o}),this.props.commit()},this.updateFxColor=e=>{const t=oe.k(e);this.props.updateFxAttr("temperature",Math.round(100*t.temperature),!1),this.props.updateFxAttr("tint",Math.round(100*t.tint),!1),this.props.commit()},this.handleSliderChange=(e,t,n=!0)=>{this.props.isPicking&&this.whiteBalanceClick(),this.props.updateFxAttr(e,t,n)},this.onChangeComplete=e=>{this.updateFxColor(e)},this.handleMouseUp=e=>{e.preventDefault(),e.stopPropagation();const t=this.props.neutralColor||oe.sb;Object(oe.E)(oe.qb,t)||this.setState({rgb:t})},this.colorDisplayComponent=()=>{const e=!this.histogramReady(),t=me()(de.a.eyedropper,{[de.a.active]:this.props.isPicking,[de.a.disabled]:e}),n=this.state.rgb;return a.createElement(r.a,null,a.createElement("div",{className:de.a.picker_label},Object(i.e)("toolBar","white_balance_picker")),a.createElement("div",{className:de.a.color_display},a.createElement(ce.a,{color:n,selected:!1,showSelection:!1}),a.createElement("div",null,` ${oe.v(Object.assign(Object.assign({},n),{a:255}))} `),a.createElement("div",{className:t,onClick:e?void 0:this.whiteBalanceClick},a.createElement(le.default,null))))}}componentWillUnmount(){this.unbindEventListeners()}bindEventListeners(){window.addEventListener("mouseup",this.handleMouseUp)}unbindEventListeners(){window.removeEventListener("mouseup",this.handleMouseUp)}render(){const e=this.props,{uiFxAttrs:t,updateFxAttr:n,neutralColor:s,isPicking:h,onOpen:c}=e,l=we(e,["uiFxAttrs","updateFxAttr","neutralColor","isPicking","onOpen"]);return a.createElement(o.a,Object.assign({},l,{title:Object(i.e)("core","colors"),panelId:ve,showMaskButton:!0,onOpen:c}),a.createElement(r.a,null,a.createElement(d.j,{style:{width:"100%"},name:"btnAutoAdjust",renderAsDisabledWhenClicked:!0,onClick:this.autoAdjustClick,disabled:!this.histogramReady(),label:Object(i.e)("toolBar","auto_adjust_colors")})),this.colorDisplayComponent(),a.createElement(ue.b,{name:"temperature",value:je(t.temperature),label:Object(i.e)("effect","temperature"),variant:ue.a.temperatureSlider,onChange:e=>this.handleSliderChange("temperature",_e(e),!1),onChangeComplete:e=>this.handleSliderChange("temperature",_e(e))}),a.createElement(ue.b,{name:"tint",value:xe(t.tint),label:Object(i.e)("effect","tint"),variant:ue.a.tintSlider,onChange:e=>this.handleSliderChange("tint",Oe(e),!1),onChangeComplete:e=>this.handleSliderChange("tint",Oe(e))}),a.createElement(be.a,null),a.createElement(fe.a,{name:"saturation",label:Object(i.e)("editor","saturation"),min:-100,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}),a.createElement(fe.a,{name:"vibrance",label:Object(i.e)("effect","vibrance"),min:-100,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}),a.createElement(fe.a,{name:"fade",label:Object(i.e)("effect","fade"),min:0,max:100,onChange:this.handleSliderChange,formatter:he.a.roundedPercent}))}}const De=Object(s.b)((function(e){return{neutralColor:e.ux.eyedropper.originalColor,isPicking:w.getEditMode(e)===b.a.sampleColor,histograms:w.getHistograms(e,oe.b.YUV),docSize:w.getDocumentSize(e),isMaskPaletteOpen:w.getMasksPaletteVisible(e)}}),(function(e,t){return{toggleWhiteBalancePicker:(t,n)=>{t?(e(g.b.ux.setEyedropperToken("whiteBalance")),e(g.b.editor.updateEditMode(b.a.sampleColor))):e(g.b.editor.updateEditMode(b.a.effect))},onApply:()=>{e(g.b.editor.updateEditMode(b.a.effect)),e(g.b.scene.clearHistograms()),t.onApply()},toggleMaskPalette:()=>e(g.b.ux.togglePalette(b.b.masks))}}))(Ce);var ye=Object(ae.a)(De,{effectType:re.a.ColorsYUV,panelId:ve,fxAttrDefaults:se.b,getUiFxAttrs:function({temperature:e,tint:t}){return{temperature:e,tint:t}}}),Pe=n("+Q43"),Se=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const Ee=F.c.exposure;class Me extends a.PureComponent{constructor(){super(...arguments),this.updateAttr=(e,t,n)=>{this.props.updateFxAttr(e,t,n)},this.autoAdjustClick=()=>{this.props.updateFxAttr("auto",!0,!0)}}render(){const e=this.props,{uiFxAttrs:t,onOpen:n,isLoading:s}=e,h=Se(e,["uiFxAttrs","onOpen","isLoading"]);return a.createElement(o.a,Object.assign({},h,{title:Object(i.e)("effect","exposure"),panelId:Ee,showMaskButton:!0,onOpen:n,isLoading:s}),a.createElement(r.a,null,a.createElement(d.j,{style:{width:"100%",whiteSpace:"normal"},name:"btnAutoAdjust",onClick:this.autoAdjustClick,disabled:s,label:Object(i.e)("effect","auto_adjust_exposure")})),a.createElement(fe.a,{name:"brightness",label:Object(i.e)("effect","brightness"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:he.a.roundedPercent}),a.createElement(fe.a,{key:"highlights",name:"highlights",label:Object(i.e)("effect","highlights"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),a.createElement(fe.a,{key:"midtones",name:"midtones",label:Object(i.e)("effect","mid_tones"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),a.createElement(fe.a,{key:"shadows",name:"shadows",label:Object(i.e)("effect","shadows"),min:-100,max:100,onChange:this.updateAttr,formatter:he.a.roundedPercent}),a.createElement(fe.a,{name:"contrast",label:Object(i.e)("effect","contrast"),min:-100,max:100,onChange:this.props.updateFxAttr,formatter:he.a.roundedPercent}))}}var ke=Object(ae.a)(Me,{effectType:re.a.RelativeExposure,panelId:Ee,fxAttrDefaults:Pe.b}),Ae=n("uwDm"),Ie=n("N66u"),Fe=n("Odgp"),Be=n("BaYo"),ze=n("z5cc"),Le=n("aour");const Re=F.b.resize;function He(e){const{width:t,height:n}=e,i=Object(I.j)();return{width:t,height:n,maxWidth:i,maxHeight:i,usePercentage:!1,lockProportions:!0,lastInputChange:null,originalSize:v.a.zeroes,originalMinWidth:ze.e,originalMinHeight:ze.e,originalAspectRatio:0,isEditing:!1}}function Ve(e){const t=parseInt(e,10);return""+t===e&&null!=t&&t>0}function Te(e,t,n,i){let a=Math.max(Math.round(e/t),ze.e);return a>i?(a=i,e=Math.round(a*t)):a<n&&(a=n,e=Math.round(a*t)),{width:e,height:a}}function We(e,t,n,i){let a=Math.max(Math.round(e*t),ze.e);return a>i?(a=i,e=Math.round(a/t)):a<n&&(a=n,e=Math.round(a/t)),{width:a,height:e}}class Ue extends a.Component{constructor(){super(...arguments),this.state=He(this.props),this.onOpen=()=>{this.setState((e,t)=>{const{width:n,height:i,minWidth:a,minHeight:s,onOpen:o}=t;o();const r=n/i,h=v.a.create(n,i);return Object.assign(Object.assign({},He(t)),{width:n,height:i,originalSize:h,originalMinWidth:a,originalMinHeight:s,originalAspectRatio:r})})},this.setSizeNoDebounce=()=>{const{width:e,height:t,originalMinWidth:n,originalMinHeight:i}=this.state,a=v.a.max(v.a.create(e,t),v.a.create(n,i)),s=v.a.divide(a,v.a.create(this.props.width,this.props.height));this.resize(a,s)},this.setSizeDebounced=Object(A.debounce)(this.setSizeNoDebounce,Be.w),this.setSize=()=>this.props.instantUpdate?this.setSizeNoDebounce():this.setSizeDebounced(),this.resize=(e,t)=>{this.props.resizeDocumentAndNodes(e),this.props.rerasterize(this.props.nodeIds)},this.toggleLockProportions=()=>{this.setState((e,t)=>{let{width:n,height:i}=e;const{lastInputChange:a,originalAspectRatio:s,maxWidth:o,maxHeight:r,originalMinWidth:h,originalMinHeight:c}=e,l=!e.lockProportions;return l&&("width"===a?({width:n,height:i}=Te(n,s,c,r)):"height"===a&&({width:n,height:i}=We(i,s,h,o))),Object.assign(Object.assign({},e),{lockProportions:l,width:n,height:i,isEditing:!0})},()=>{this.state.lockProportions&&this.setSize()})},this.calcPercentageFromValue=(e,t)=>{const{originalSize:n}=this.state,[i,a]=n;let s=t?e/i*100:e/a*100;return s=Math.round(s),s},this.calcValuefromPercentage=(e,t)=>{const{originalSize:n}=this.state,[i,a]=n;let s=t?i*e/100:a*e/100;return s=Math.round(s)<1?1:Math.round(s),s},this.togglePercentage=(e,t)=>{this.setState((e,n)=>Object.assign(Object.assign({},e),{usePercentage:t}))},this.setWidth=e=>{const t=e.target.value;if(!Ve(t))return;let n=parseInt(t,10);n=this.state.usePercentage?this.calcValuefromPercentage(n,!0):n,n=Math.min(n,this.state.maxWidth),n<this.state.originalMinWidth||this.setState((e,t)=>{let i=e.height;return e.lockProportions&&({width:n,height:i}=Te(n,e.originalAspectRatio,e.originalMinHeight,e.maxHeight)),Object.assign(Object.assign({},e),{width:n,height:i,lastInputChange:"width",isEditing:!0})},()=>{this.setSize()})},this.setHeight=e=>{const t=e.target.value;if(!Ve(t))return;let n=parseInt(t,10);n=this.state.usePercentage?this.calcValuefromPercentage(n,!1):n,n=Math.min(n,this.state.maxHeight),n<this.state.originalMinHeight||this.setState((e,t)=>{let i=e.width;return e.lockProportions&&({width:i,height:n}=We(n,e.originalAspectRatio,e.originalMinWidth,e.maxHeight)),Object.assign(Object.assign({},e),{height:n,width:i,lastInputChange:"height",isEditing:!0})},()=>{this.setSize()})},this.handleApply=()=>{this.setSizeNoDebounce(),this.props.onApply()}}static getDerivedStateFromProps(e,t){return t.isEditing?t.width===e.width&&t.height===e.height?{isEditing:!1}:null:{width:e.width,height:e.height}}render(){const{width:e,height:t,usePercentage:n,lockProportions:s}=this.state,p=n?y.b.percent:y.b.pixels,m=Object(I.j)();return a.createElement(o.a,{title:Object(i.e)("editor","resize_canvas"),panelId:Re,onOpen:this.onOpen,onApply:this.handleApply,layerEffectType:P.a.transform},a.createElement(r.a,null,a.createElement("div",{className:D.dimensions},a.createElement(h.a,{htmlFor:"txtCropWidth"},Object(i.e)("toolBar","width")),a.createElement("div",null),a.createElement(h.a,{htmlFor:"txtCropHeight"},Object(i.e)("toolBar","height")),a.createElement("div",null),a.createElement(c.a,{name:"txtResizeWidth",value:Math.ceil(n?this.calcPercentageFromValue(e,!0):e),onChange:this.setWidth,maxValue:m,units:p,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),a.createElement("div",{className:D.divider},"✕"),a.createElement(c.a,{name:"txtResizeHeight",value:Math.ceil(n?this.calcPercentageFromValue(t,!1):t),onChange:this.setHeight,maxValue:m,units:p,shouldUpdateValueWhileFocused:!0,shouldAllowZerosAtStart:!1}),a.createElement(u.b,{for:"btn-keep-proportions",text:Object(i.e)("toolBar","keep_proportions"),offset:{dx:0,dy:-3},hideOnClick:!1}),a.createElement(d.b,{id:"btn-keep-proportions",on:!1,onClick:this.toggleLockProportions},s?a.createElement(Ie.default,null):a.createElement(Fe.default,null)))),a.createElement(l.b,{name:"percentage",label:Object(i.e)("toolBar","use_percentages"),onChange:this.togglePercentage,value:n}))}}const Ne={width:0,height:0,minWidth:ze.e,minHeight:ze.e,nodeIds:Ae.a};var Ge=Object(s.b)((function(e){const{ux:t}=e;return null!=t.panelSelected&&t.panelSelected.panelId===Re?function(e){const{dx:t,dy:n}=v.a.toSize(w.getDocumentSize(e)),i=w.getCollageMinDocumentSize(e),a=Object(Le.a)(i);return{width:t,height:n,minWidth:a[0],minHeight:a[1],nodeIds:w.getAllTransformableNodeIds(e)}}(e):Ne}),(function(e){return{resizeDocumentAndNodes:t=>{e(g.b.sagas.undoCurFrame()),e(g.b.scene.resizeDocumentAndNodes(t))},rerasterize:t=>e(g.b.sagas.rerasterize(t)),onOpen:()=>e(g.b.editor.updateEditMode(b.a.resize)),onApply:()=>e(g.b.undo.commit())}}))(Ue),Ze=n("wynV"),Xe=n("bb0R"),qe=n("gH0B"),Je={insert:"head",singleton:!1},Ke=(j()(qe.a,Je),qe.a.locals||{}),Ye=n("9LwQ"),Qe=n("8pJm"),$e=n("wHal");const et=Object(oe.eb)(60,60,60);class tt extends a.Component{constructor(){super(...arguments),this.setCanvas=e=>{if(e){this.canvas=e;try{this.ctx=e.getContext("2d")}catch(t){}}}}componentDidMount(){this.props.histograms&&(this.setCanvasScale(),this.drawHistogram())}componentDidUpdate(e){Object(A.isEqual)(e,this.props)||this.props.histograms&&this.drawHistogram()}setCanvasScale(){const e=Object(Qe.a)();this.ctx&&this.ctx.scale(e,e)}getCanvasSize(){return v.a.toSize(v.a.create(parseInt(Ke.canvas_width,10)||1,parseInt(Ke.canvas_height,10)||1))}drawHistogram(){if(this.ctx&&this.props.histograms.length>0){const e=this.getCanvasSize();!function(e,t){e.clearRect(0,0,t.dx,t.dy)}(this.ctx,e),function(e,t,n,i,a){const s=function(e,t){return function(n){return(n=Object($e.a)(n,0,t))/t*e.dy}}(t,a);for(let o=0;o<t.dx;o+=.25){const a=o/t.dx*255;let r=Array(n.length);const h=Math.floor(a),c=Math.ceil(a);for(let e=0;e<n.length;e++){const t=n[e][h],o=n[e][c],l=Object(Ye.a)(t,o,a-h);r[e]={value:s(l),color:i[e]}}r=r.sort((e,t)=>t.value-e.value),r.length>1&&(r[1].color=Object(oe.m)(r[0].color,r[1].color)),r.length>2&&(r[2].color=et);for(let n=0;n<r.length;n++)e.beginPath(),e.lineWidth=.25,e.strokeStyle=Object(oe.v)(r[n].color),e.moveTo(o,t.dy),e.lineTo(o,t.dy-r[n].value),e.stroke()}}(this.ctx,e,this.props.histograms,this.props.colors,this.props.maxScale)}}render(){const e=this.getCanvasSize();return a.createElement("canvas",{className:Ke.canvas_style,ref:this.setCanvas,width:Object(Qe.a)()*e.dx,height:Object(Qe.a)()*e.dy})}}var nt=tt;function it(e,t){const n=Array(t.length);for(let i=0;i<n.length;i++)n[i]=0;for(let i=0;i<t.length;i++){n[e(i)]+=t[i]}return n}var at=n("rH2R");function st(e,t,n,i,a,s=!0,o=255){const r=Object(at.a)(n);return e/=o,i/=o,t/=o,a/=o,function(n){return n/=o,n=(Object($e.a)(n,e,t)-e)/(t-e),n=Math.pow(n,r),n=Object($e.a)(n,i,a),n*=o,s?Math.round(n):n}}function ot(e,t){const n=[];return e.forEach(e=>{for(let i=0;i<e.length;i++)n.push(e[i]),n.sort((e,t)=>t-e),n.length>t&&(n.length=t)}),n[n.length-1]}var rt=n("LtTe"),ht=n("DlAU");const ct=Object.assign({},rt.g),lt=[oe.lb,oe.ib,oe.db],dt=F.c.levels,ut=["red","green","blue"],pt={autoMonochrome:{perChannel:!1,neutralMidtones:!1},autoMonochromePreserveMidtones:{perChannel:!1,neutralMidtones:!0},autoPerColor:{perChannel:!0,neutralMidtones:!1},autoPerColorPreserveMidtones:{perChannel:!0,neutralMidtones:!0}};class mt extends a.PureComponent{constructor(e){let t,n;if(super(e),this.updateMinInput=e=>{e=Object($e.a)(e,0,this.valuesForChannel().maxInput),this.updateVecValue({minInput:e})},this.updateMaxInput=e=>{e=Object($e.a)(e,this.valuesForChannel().minInput,255),this.updateVecValue({maxInput:e})},this.updateMidPoint=e=>{const{minInput:t,maxInput:n}=this.valuesForChannel();e=((e=Object($e.a)(e,t,n))-t)/(n-t),this.updateVecValue({midPoint:e})},this.inputsOnChange=e=>this.handleInputsChanged(e,!0),this.inputsOnValuesUpdated=e=>this.handleInputsChanged(e,!1),this.updateMinOutput=e=>{e=Object($e.a)(e,0,this.valuesForChannel().maxOutput),this.updateVecValue({minOutput:e})},this.updateMaxOutput=e=>{e=Object($e.a)(e,this.valuesForChannel().minOutput,255),this.updateVecValue({maxOutput:e})},this.outputsOnChange=e=>this.handleOutputsChanged(e,!0),this.outputsOnValuesUpdated=e=>this.handleOutputsChanged(e,!1),this.updatePreset=e=>{if(this.props.updateFxAttr("preset",e,!1),"custom"===e)return;this.reset();const t=pt[e],{histograms:n}=this.props;t&&n&&!n.updating&&(t.perChannel?(this.setChannelLevels("red",Object(ht.a)([n.red.histogram],t.neutralMidtones)),this.setChannelLevels("green",Object(ht.a)([n.green.histogram],t.neutralMidtones)),this.setChannelLevels("blue",Object(ht.a)([n.blue.histogram],t.neutralMidtones))):this.setChannelLevels("rgb",Object(ht.a)([n.red.histogram,n.green.histogram,n.blue.histogram],t.neutralMidtones))),this.props.commit()},this.updateChannel=e=>{this.props.updateFxAttr("channel",e,!0)},e.histograms&&this.histogramReady(e.histograms)){const{red:i,green:a,blue:s}=e.histograms;n=ot([i.histogram,a.histogram,s.histogram],10),t=this.mapHistograms(e.histograms,e.uiFxAttrs)}this.state={mappedHistograms:t,maxScale:n}}updateVecValue(e,t=null){const{uiFxAttrs:n}=this.props;let i=n[t=t||n.channel||"rgb"];i=Object.assign(Object.assign({},i),e),this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr(t,i,!1)}scaledMidPoint(){const{midPoint:e,maxInput:t,minInput:n}=this.valuesForChannel();return Math.round(e*(t-n)+n)}handleInputsChanged(e,t){this.valuesForChannel().minInput!==e[0]?this.updateMinInput(e[0]):this.valuesForChannel().maxInput!==e[2]?this.updateMaxInput(e[2]):this.scaledMidPoint()!==e[1]&&this.updateMidPoint(e[1]),t&&this.props.commit()}handleOutputsChanged(e,t){this.valuesForChannel().minOutput!==e[0]?this.updateMinOutput(e[0]):this.valuesForChannel().maxOutput!==e[1]&&this.updateMaxOutput(e[1]),t&&this.props.commit()}valuesForChannel(){const e=Object.assign(Object.assign({},ct),this.props.uiFxAttrs),t=e.channel||"rgb";return Object.assign(Object.assign({},e[t]),{channel:t})}componentDidUpdate(e){if(this.props.histograms&&!Object(A.isEqual)(e,this.props)&&this.histogramReady(this.props.histograms)&&(this.setState({mappedHistograms:this.mapHistograms(this.props.histograms,this.props.uiFxAttrs)}),!Object(A.isEqual)(e.histograms,this.props.histograms))){const{red:e,green:t,blue:n}=this.props.histograms||{};this.setState({maxScale:ot([e.histogram,t.histogram,n.histogram],10)})}}mapHistograms(e,t){if(!e)return null;if(!t.rgb)return null;const{minInput:n,maxInput:i,midPoint:a,minOutput:s,maxOutput:o}=t.rgb,r=st(n,i,a,s,o);return ut.map(n=>{const i=t[n];let a=e[n].histogram;if(i&&a){const{minInput:e,maxInput:t,midPoint:n,minOutput:s,maxOutput:o}=i;return a=it(st(e,t,n,s,o),a),a=it(r,a),a}return[]})}histogramReady(e){return!!e&&!e.updating}setChannelLevels(e,t){let n=this.props.uiFxAttrs[e];n=Object.assign(Object.assign({},n),t),this.props.updateFxAttr(e,n,!1)}reset(){this.props.updateFxAttr("rgb",rt.f,!1),this.props.updateFxAttr("red",rt.f,!1),this.props.updateFxAttr("green",rt.f,!1),this.props.updateFxAttr("blue",rt.f,!1),this.props.updateFxAttr("channel","rgb",!1),this.props.commit()}histogramProps(e){const t=this.state.maxScale||1,n=lt,{mappedHistograms:i}=this.state;if(i){if("rgb"===e)return{histograms:i,colors:n,maxScale:t};{const a=ut.indexOf(e);return{histograms:[i[a]],colors:[n[a]],maxScale:t}}}return{histograms:[],colors:n,maxScale:t}}render(){const{channel:e,minInput:t,maxInput:n,minOutput:s,maxOutput:r}=this.valuesForChannel(),h=this.props.uiFxAttrs.preset,c=this.scaledMidPoint(),l=(()=>({rgb:Object(i.e)("effect","rgb"),red:Object(i.e)("effect","red"),green:Object(i.e)("effect","green"),blue:Object(i.e)("effect","blue")}))(),d=(()=>({none:Object(i.e)("core","none"),custom:Object(i.e)("effect","custom_preset"),autoMonochrome:Object(i.e)("effect","auto_monochrome"),autoMonochromePreserveMidtones:"- "+Object(i.e)("effect","mono_preserve_mids"),autoPerColor:Object(i.e)("effect","auto_per_color"),autoPerColorPreserveMidtones:"- "+Object(i.e)("effect","color_preserve_mids")}))();return a.createElement(o.a,Object.assign({},this.props,{title:Object(i.e)("effect","levels"),panelId:dt,showMaskButton:!0}),a.createElement(f.b,{label:Object(i.e)("effect","presets"),onChange:this.updatePreset,disabled:!this.state.mappedHistograms},Object(A.keys)(d).map((e,t)=>{const n=d[e];return a.createElement(p.a,{key:t,selected:e===h,value:e,label:n,id:e,shouldShowOverflowTooltip:!0})})),a.createElement(f.b,{label:Object(i.e)("effect","channel"),isRow:!0,onChange:this.updateChannel},Object(A.keys)(l).map((t,n)=>a.createElement(p.a,{key:t,selected:t===e,value:t,label:l[t]}))),a.createElement(nt,Object.assign({},this.histogramProps(e))),a.createElement(Xe.b,{label:Object(i.e)("effect","inputs"),key:"inputs",min:0,max:255,values:[t,c,n],onUpdate:this.inputsOnValuesUpdated,onChange:this.inputsOnChange}),a.createElement(Xe.c,{label:Object(i.e)("effect","outputs"),key:"outputs",min:0,max:255,values:[s,r],onUpdate:this.outputsOnValuesUpdated,onChange:this.outputsOnChange}))}}const gt={effectType:re.a.Levels,panelId:dt,fxAttrDefaults:ct,getUiFxAttrs:function(e){return e}},bt=Object(ae.b)(gt);const ft=Object(ae.c)(gt);var wt=Object(s.b)((function(e){return Object.assign(Object.assign({},ft(e)),{histograms:w.getHistograms(e,oe.b.RGB)})}),(function(e,t){return Object.assign({},bt(e,t))}))(mt),vt=n("WXY0"),xt=n("GZZW"),Ot=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const jt=F.c.sharpen;var _t=Object(ae.a)((function(e){var{uiFxAttrs:t,updateFxAttr:n}=e,s=Ot(e,["uiFxAttrs","updateFxAttr"]);return a.createElement(o.a,Object.assign({},s,{title:Object(i.e)("effect","sharpen"),panelId:jt,showMaskButton:!0}),a.createElement(fe.a,{name:"radius",label:Object(i.e)("effect","radius"),min:1,max:128,onChange:n}),a.createElement(fe.a,{name:"strength",label:Object(i.e)("effect","strength"),min:0,max:400,formatter:fe.b.roundedPercent,onChange:n,debounceWaitMS:20}),a.createElement(fe.a,{name:"clarity",label:Object(i.e)("effect","clarity"),min:0,max:xt.i,onChange:n,debounceWaitMS:20}),a.createElement(fe.a,{name:"fade",label:Object(i.e)("effect","fade"),min:xt.m,max:xt.d,formatter:fe.b.roundedPercent,onChange:n}))}),{effectType:re.a.UnsharpMaskV2,panelId:jt,fxAttrDefaults:vt.b}),Ct=n("1rmp"),Dt=n("AXy9"),yt=n("/BrD"),Pt=n("QKml"),St=n("xlbG"),Et=n("VPDm"),Mt=n("x+OS"),kt=n("MOMi"),At=n("l75k"),It=n("kUL8"),Ft=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const Bt=F.c.dodge,zt=Bt+"_brush_controls",Lt={low:Object(oe.eb)(255,0,0,127),mid:Object(oe.eb)(0,255,0,127),high:Object(oe.eb)(0,0,255,127),erase:Object(oe.eb)(255,255,255,255)},Rt=()=>[Object(i.e)("effect","shadows"),Object(i.e)("effect","midtones"),Object(i.e)("effect","highlights"),Object(i.e)("effect","brush_mode_erase")],Ht=e=>{const t=Object(oe.bb)(e);return(()=>{const e=Rt();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function Vt(e,t){e(g.b.ux.setBrushColorNoAlpha(t))}const Tt=Object(s.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=w.getCurFx(e);let i=!0;if(null!=n){const t=w.getEffect(e,n.effectId);t&&(i=t.attrs.newCurves)}return{brushMode:Ht(t),newCurves:i}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?kt.j.reverseSubtract:kt.j.add;e(g.b.ux.setBrushBlendMode(n)),Vt(e,Lt[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Pt.a.default)),e(g.b.ux.changeBrushType(Ct.b.softDodgeBurnBrush)),Vt(e,Lt[Dt.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(Ct.b.softRoundBrush)),t.onApply()}}}));var Wt=Object(ae.a)(Tt((function(e){var{updateBrush:t,onOpenPanel:n,onApply:s,brushMode:r,uiFxAttrs:h,updateFxAttr:c,documentSize:l}=e,d=Ft(e,["updateBrush","onOpenPanel","onApply","brushMode","uiFxAttrs","updateFxAttr","documentSize"]);const u=Rt();return a.createElement(o.a,Object.assign({},d,{onOpen:n,onApply:s,title:Object(i.e)("effect","dodge"),panelId:Bt,showMaskButton:!1}),a.createElement(St.a,{variant:Et.c.underliner,name:"brush",onChange:t,defaultTab:"mid",label:r,tabs:[{key:"low",label:Object(i.e)("effect","low"),tooltip:u[0]},{key:"mid",label:Object(i.e)("effect","mid"),tooltip:u[1]},{key:"high",label:Object(i.e)("effect","high"),tooltip:u[2]},{key:"erase",label:a.createElement(Mt.default,null),tooltip:u[3]}]}),a.createElement(It.a,{sectionLabel:zt},a.createElement(yt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(At.b)(l,.05,50,100)})),a.createElement(be.a,null),a.createElement(fe.a,{name:"fade",label:Object(i.e)("effect","fade"),min:xt.m,max:xt.d,formatter:fe.b.roundedPercent,onChange:c}))})),{effectType:re.a.Dodge,panelId:Bt,fxAttrDefaults:Object.assign(Object.assign({},Dt.b),{newCurves:!0})}),Ut=n("cEys"),Nt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n};const Gt=F.c.burn,Zt=Gt+"_brush_controls",Xt={low:Object(oe.eb)(255,0,0,127),mid:Object(oe.eb)(0,255,0,127),high:Object(oe.eb)(0,0,255,127),erase:Object(oe.eb)(255,255,255,255)},qt=()=>[Object(i.e)("effect","shadows"),Object(i.e)("effect","midtones"),Object(i.e)("effect","highlights"),Object(i.e)("effect","brush_mode_erase")],Jt=e=>{const t=Object(oe.bb)(e);return(()=>{const e=qt();return{"255-0-0":e[0],"0-255-0":e[1],"0-0-255":e[2],"255-255-255":e[3]}})()[t]};function Kt(e,t){e(g.b.ux.setBrushColor(t))}const Yt=Object(s.b)((function(e){const{color:t}=w.getActiveBrush(e).props,n=Jt(t),i=w.getCurFx(e);let a=!0;if(null!=i){const t=w.getEffect(e,i.effectId);t&&(a=t.attrs.newCurves)}return{brushMode:n,newCurves:a}}),(function(e,t){return{updateBrush:t=>{const n="erase"===t?kt.j.reverseSubtract:kt.j.add;e(g.b.ux.setBrushBlendMode(n)),Kt(e,Xt[t])},onOpenPanel:()=>{e(g.b.ux.setActiveBrush(Pt.a.default)),e(g.b.ux.changeBrushType(Ct.b.softDodgeBurnBrush)),Kt(e,Xt[Ut.b.preset]),t.onOpen()},onApply:()=>{e(g.b.ux.changeBrushType(Ct.b.softRoundBrush)),t.onApply()}}}))((function(e){var{updateBrush:t,onOpenPanel:n,onApply:s,brushMode:r,updateFxAttr:h,documentSize:c}=e,l=Nt(e,["updateBrush","onOpenPanel","onApply","brushMode","updateFxAttr","documentSize"]);const d=qt();return a.createElement(o.a,Object.assign({},l,{onOpen:n,onApply:s,title:Object(i.e)("effect","burn"),panelId:Gt,showMaskButton:!1}),a.createElement(St.a,{variant:Et.c.underliner,name:"brush",defaultTab:"mid",label:r,onChange:t,tabs:[{key:"low",label:Object(i.e)("effect","low"),tooltip:d[0]},{key:"mid",label:Object(i.e)("effect","mid"),tooltip:d[1]},{key:"high",label:Object(i.e)("effect","high"),tooltip:d[2]},{key:"erase",label:a.createElement(Mt.default,null),tooltip:d[3]}]}),a.createElement(It.a,{sectionLabel:Zt},a.createElement(yt.a,{showBrushMode:!1,showShapes:!1,initialBrushValues:Object(At.b)(c,.05,50,100)})),a.createElement(be.a,null),a.createElement(fe.a,{name:"fade",label:Object(i.e)("effect","fade"),min:xt.m,max:xt.d,formatter:fe.b.roundedPercent,onChange:h}))}));var Qt=Object(ae.a)(Yt,{effectType:re.a.Burn,panelId:Gt,fxAttrDefaults:Ut.b})},Jm8X:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("q1tI"),a=n("dJhg");function s({children:e}){return i.createElement("div",{className:a.a.feature_row},e)}},N66u:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 30 30"},e),i.createElement("g",null,i.createElement("path",{d:"M17.02081,12.272a1,1,0,1,0-1.41418,1.41425l1.41424,1.41431a1.00017,1.00017,0,0,1-.00006,1.41412l-6.364,6.364a1.00015,1.00015,0,0,1-1.41412.00012L7.12122,20.7572l.00012.00012a.99987.99987,0,0,1-.00014-1.414l.00014-.00014-.00012.00006,2.0252-2.0252a1,1,0,0,0-1.41418-1.41418L5,18.63605v2.82843L8.53552,25H11.364l7.7782-7.7782V14.39337Z"}),i.createElement("path",{d:"M21.46448,5H18.63605l-7.78137,7.78131v2.82843L12.976,17.73108a1,1,0,1,0,1.41425-1.41425l-1.41431-1.41424a1,1,0,0,1-.00006-1.414l6.36725-6.36731a1.00014,1.00014,0,0,1,1.41412-.00013l2.12152,2.12159-.00012-.00013a1,1,0,0,1,0,1.41421l0,0L20.85358,12.682a1,1,0,0,0,1.41418,1.41424L25,11.364V8.53552Z"})))}},NvXt:function(e,t,n){"use strict";var i=n("LboF"),a=n.n(i),s=n("ff8H"),o={insert:"head",singleton:!1};a()(s.a,o);t.a=s.a.locals||{}},Odgp:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,viewBox:"0 0 30 30"},e),i.createElement("g",null,i.createElement("path",{d:"M9.4689,10.53027a.74992.74992,0,0,0,1.06265-1.05844l-.0021-.0021-3-3A.74992.74992,0,0,0,6.4668,7.52817l.0021.0021Z"}),i.createElement("path",{d:"M5.99917,13.75h3a.75.75,0,0,0,0-1.5h-3a.75.75,0,1,0,0,1.5Z"}),i.createElement("path",{d:"M13.55984,19.97485,10.656,22.87866a1.00015,1.00015,0,0,1-1.41412.00012L7.12039,20.7572l.00012.00012a.99989.99989,0,0,1-.00012-1.41406l.00012-.00012-.00012.00006,2.90393-2.90387a1,1,0,1,0-1.41425-1.41424l-3.6109,3.611v2.82843L8.5347,25h2.82843l3.6109-3.6109a1,1,0,1,0-1.41419-1.41425Z"}),i.createElement("path",{d:"M21.46365,5H18.63522l-3.6109,3.6109a1,1,0,0,0,1.41418,1.41419l2.90381-2.90381a1.00015,1.00015,0,0,1,1.41413-.00013L22.878,9.24274l-.00012-.00013a1,1,0,0,1,0,1.41421l0,0L19.974,13.56067a1,1,0,0,0,1.41424,1.41418l3.6109-3.6109V8.53552Z"}),i.createElement("path",{d:"M12.99917,9.75a.75018.75018,0,0,0,.75-.75V6a.75.75,0,0,0-1.5,0V9A.7502.7502,0,0,0,12.99917,9.75Z"}),i.createElement("path",{d:"M16.99917,20.25a.7502.7502,0,0,0-.75.75v3a.75.75,0,0,0,1.5,0V21A.75018.75018,0,0,0,16.99917,20.25Z"}),i.createElement("path",{d:"M23.99917,16.25h-3a.75.75,0,0,0,0,1.5h3a.75.75,0,0,0,0-1.5Z"}),i.createElement("path",{d:"M20.52945,19.46973a.74992.74992,0,0,0-1.06055,1.06054l3,3a.74992.74992,0,0,0,1.06055-1.06054Z"})))}},SeV6:function(e,t,n){"use strict";n.r(t);var i=n("q1tI");t.default=function(e){return i.createElement("svg",Object.assign({width:30,height:30},e),i.createElement("path",{d:"M24.003 6a1.001 1.001 0 0 0-1 1.001v2.006a9.936 9.936 0 0 0-2.954-2.632c-.007-.005-.01-.012-.017-.016-.007-.003-.014-.003-.02-.006a10 10 0 0 0-4.21-1.32l-.015-.004-.01.001a9.972 9.972 0 0 0-4.378.642l-.01.004-.004.001-.005.003a9.95 9.95 0 0 0-3.646 2.463c-.012.011-.027.015-.038.027-.01.011-.013.025-.023.037a10.013 10.013 0 0 0-1.817 2.75 10.182 10.182 0 0 0-.39 1.044c-.002.006-.007.01-.009.017-.003.01 0 .019-.003.028a9.91 9.91 0 0 0-.35 4.369c.002.016-.004.03-.002.045.002.014.01.024.013.038a9.431 9.431 0 0 0 1.54 3.99.942.942 0 0 0 .051.125.993.993 0 0 0 .123.14 9.935 9.935 0 0 0 2.263 2.341q.405.297.836.55l.024.014.002.002.006.002c.11.064.22.127.333.187a1.001 1.001 0 0 0 .942-1.767q-.148-.08-.293-.164-.345-.203-.67-.441a8.004 8.004 0 1 1 11.33-10.976l-2.407-.476a1.002 1.002 0 0 0-.388 1.965l5.002.99a1 1 0 0 0 1.194-.983V7.001a1 1 0 0 0-1-1.001zm-9.644 17a1.002 1.002 0 0 0-.161 1.997l.082.003a1.002 1.002 0 0 0 .079-2zm3.545-.522l-.01.004-.013.005a1.002 1.002 0 0 0 .36 1.936.991.991 0 0 0 .36-.067l.021-.008.01-.004a1.001 1.001 0 0 0-.728-1.866zm2.946-1.998a1 1 0 1 0 1.414-.05 1 1 0 0 0-1.413.05zm3.04-3.74a1.002 1.002 0 1 0 .657 1.255.999.999 0 0 0-.656-1.255z"}))}},cFMp:function(e,t,n){"use strict";var i=n("JPst"),a=n.n(i)()((function(e){return e[1]}));a.push([e.i,".src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-ELpW5 canvas{margin:10px 27px;border:2px solid #bebebe}",""]),a.locals={curve_control_width:"186px",curve_control_container:"src-editor-components-tool_bar-panels-effects--curves-module-curve_control_container-ELpW5"},t.a=a},ff8H:function(e,t,n){"use strict";var i=n("JPst"),a=n.n(i)()((function(e){return e[1]}));a.push([e.i,".src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(1){width:29px;height:29px;margin:-3px 9px 0px -2px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(2){color:#85888f;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-left:5px;margin-top:4px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(2) input{width:90px;height:30px}.src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo div:nth-child(3){border:1px solid;border-color:#cacdd2;height:30px;width:30px}",""]),a.locals={color_display:"src-editor-components-tool_bar-panels-basic_edits--styles-module-color_display-B4IZo"},t.a=a},gH0B:function(e,t,n){"use strict";var i=n("JPst"),a=n.n(i)()((function(e){return e[1]}));a.push([e.i,".src-editor-components-tool_bar-controls--histogram-module-canvas_style-T6fRK{width:240px;height:100px;margin:8px 0;border:2px solid #ccc;background:-webkit-gradient(linear, left top, right top, from(#ccc), to(#fff));background:-o-linear-gradient(left, #ccc, #fff);background:linear-gradient(to right, #ccc, #fff)}",""]),a.locals={canvas_width:"240px",canvas_height:"100px",canvas_style:"src-editor-components-tool_bar-controls--histogram-module-canvas_style-T6fRK"},t.a=a},l75k:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("MOMi"),a=n("xM47");const s={angleDegrees:0,shape:i.k.circle,spacing:a.e};function o(e,t,n){return Object.assign(Object.assign({},s),{hardness:t,strength:n,size:e})}function r(e,t,n,i){const a=Math.sqrt(e[0]*e[1])*t;return Object.assign(Object.assign({},s),{hardness:n,strength:i,size:a})}},"v/vF":function(e){e.exports=JSON.parse('[{"id":222182,"name":"square","width":1,"height":1,"scaleDocument":false},{"id":222157,"name":{"width":3.5,"height":2,"unit":"in"},"width":600,"height":1050,"scaleDocument":false},{"id":222015,"name":{"width":4,"height":2,"unit":"in"},"width":600,"height":1200,"scaleDocument":false},{"id":222016,"name":{"width":3.5,"height":2.5,"unit":"in"},"width":750,"height":1050,"scaleDocument":false},{"id":222017,"name":{"width":2.5,"height":3,"unit":"in"},"width":900,"height":750,"scaleDocument":false},{"id":222203,"name":{"width":3,"height":3,"unit":"in"},"width":900,"height":900,"scaleDocument":false},{"id":222205,"name":{"width":5,"height":3,"unit":"in"},"width":900,"height":1500,"scaleDocument":false},{"id":222018,"name":{"width":2,"height":3.5,"unit":"in"},"width":1050,"height":600,"scaleDocument":false},{"id":222019,"name":{"width":5,"height":3.5,"unit":"in"},"width":1050,"height":1500,"scaleDocument":false},{"id":222158,"name":{"width":2,"height":4,"unit":"in"},"width":1200,"height":600,"scaleDocument":false},{"id":222020,"name":{"width":6,"height":4,"unit":"in"},"width":1200,"height":1800,"scaleDocument":false},{"id":222021,"name":{"width":8,"height":4,"unit":"in"},"width":1200,"height":2400,"scaleDocument":false},{"id":222198,"name":{"width":6,"height":4.25,"unit":"in"},"width":1275,"height":1800,"scaleDocument":false},{"id":222022,"name":{"width":7,"height":5,"unit":"in"},"width":1500,"height":2100,"scaleDocument":false},{"id":222024,"name":{"width":8.5,"height":5.5,"unit":"in"},"width":1650,"height":2550,"scaleDocument":false},{"id":222023,"name":{"width":5.25,"height":5.25,"unit":"in"},"width":1575,"height":1575,"scaleDocument":false},{"id":222159,"name":{"width":4,"height":6,"unit":"in"},"width":1800,"height":1200,"scaleDocument":false},{"id":222025,"name":{"width":9,"height":6,"unit":"in"},"width":1800,"height":2700,"scaleDocument":false},{"id":222207,"name":{"width":11,"height":6,"unit":"in"},"width":1800,"height":3300,"scaleDocument":false},{"id":222160,"name":{"width":5,"height":7,"unit":"in"},"width":2100,"height":1500,"scaleDocument":false},{"id":222161,"name":{"width":4,"height":8,"unit":"in"},"width":2400,"height":1200,"scaleDocument":false},{"id":222026,"name":{"width":10,"height":8,"unit":"in"},"width":2400,"height":3000,"scaleDocument":false},{"id":222199,"name":{"width":11,"height":8,"unit":"in"},"width":2400,"height":3300,"scaleDocument":false},{"id":222027,"name":{"width":11,"height":8.5,"unit":"in"},"width":2550,"height":3300,"scaleDocument":false},{"id":222162,"name":{"width":6,"height":9,"unit":"in"},"width":2700,"height":1800,"scaleDocument":false},{"id":222155,"name":{"width":8,"height":10,"unit":"in"},"width":3000,"height":2400,"scaleDocument":false},{"id":222156,"name":{"width":8.5,"height":11,"unit":"in"},"width":3300,"height":2550,"scaleDocument":false},{"id":222187,"name":{"width":14,"height":11,"unit":"in"},"width":3300,"height":4200,"scaleDocument":false},{"id":222188,"name":{"width":9,"height":16,"unit":"in"},"width":4800,"height":2700,"scaleDocument":false},{"id":222194,"name":"a3","width":3508,"height":4961,"scaleDocument":false},{"id":222197,"name":"a4","width":2480,"height":3508,"scaleDocument":false},{"id":222206,"name":"a5","width":1748,"height":2480,"scaleDocument":false},{"id":222202,"name":"a6","width":1240,"height":1748,"scaleDocument":false},{"id":222201,"name":"a7","width":874,"height":1240,"scaleDocument":false},{"id":222030,"name":"etsy_item_listing_photo","width":2000,"height":2000,"scaleDocument":true},{"id":222031,"name":"etsy_order_receipt_banner","width":760,"height":100,"scaleDocument":true},{"id":222032,"name":"etsy_shop_big_banner","width":3360,"height":840,"scaleDocument":true},{"id":222033,"name":"etsy_shop_icon","width":500,"height":500,"scaleDocument":true},{"id":222034,"name":"etsy_shop_mini_banner","width":1200,"height":160,"scaleDocument":true},{"id":222035,"name":"etsy_shop_owner_photo","width":400,"height":400,"scaleDocument":true},{"id":222037,"name":"facebook_ad","width":1200,"height":628,"scaleDocument":true},{"id":222038,"name":"facebook_carousel_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222039,"name":"facebook_event_cover","width":1200,"height":628,"scaleDocument":true},{"id":222040,"name":"facebook_group_cover","width":1640,"height":856,"scaleDocument":true},{"id":222041,"name":"facebook_page_cover","width":1640,"height":924,"scaleDocument":true},{"id":222042,"name":"facebook_personal_cover","width":1702,"height":630,"scaleDocument":true},{"id":222043,"name":"facebook_post","width":1200,"height":1200,"scaleDocument":true},{"id":222044,"name":"facebook_profile_image","width":360,"height":360,"scaleDocument":true},{"id":222045,"name":"facebook_story","width":1080,"height":1920,"scaleDocument":true},{"id":222047,"name":"igtv_cover_photo","width":420,"height":654,"scaleDocument":true},{"id":222154,"name":"instagram_carousel_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222048,"name":"instagram_landscape","width":1080,"height":566,"scaleDocument":true},{"id":222049,"name":"instagram_portrait","width":1080,"height":1350,"scaleDocument":true},{"id":222050,"name":"instagram_post","width":1080,"height":1080,"scaleDocument":true},{"id":222051,"name":"instagram_profile","width":360,"height":360,"scaleDocument":true},{"id":222052,"name":"instagram_story","width":1080,"height":1920,"scaleDocument":true},{"id":222053,"name":"instagram_story_highlight_cover","width":1080,"height":1920,"scaleDocument":true},{"id":222055,"name":"linkedin_company_cover","width":1128,"height":191,"scaleDocument":true},{"id":222056,"name":"linkedin_cover_photo","width":1584,"height":396,"scaleDocument":true},{"id":222057,"name":"linkedin_post","width":1400,"height":800,"scaleDocument":true},{"id":222058,"name":"linkedin_profile","width":400,"height":400,"scaleDocument":true},{"id":222059,"name":"linkedin_sponsored_ad","width":1200,"height":627,"scaleDocument":true},{"id":222061,"name":"medium_background_image","width":1500,"height":750,"scaleDocument":true},{"id":222063,"name":"pinterest_pin","width":1000,"height":1500,"scaleDocument":true},{"id":222064,"name":"pinterest_ad_pin","width":1000,"height":1500,"scaleDocument":true},{"id":222065,"name":"pinterest_square_pin","width":1000,"height":1000,"scaleDocument":true},{"id":222067,"name":"snapchat_ad","width":1080,"height":1920,"scaleDocument":true},{"id":222068,"name":"snapchat_geofilter","width":1080,"height":2340,"scaleDocument":true},{"id":222069,"name":"snapchat_story_ad","width":360,"height":600,"scaleDocument":true},{"id":222071,"name":"tumblr_post","width":500,"height":750,"scaleDocument":true},{"id":222072,"name":"tumblr_profile","width":360,"height":360,"scaleDocument":true},{"id":222074,"name":"twitch_highlight","width":1920,"height":1080,"scaleDocument":true},{"id":222076,"name":"twitter_header","width":1500,"height":500,"scaleDocument":true},{"id":222077,"name":"twitter_lead_generation_card","width":800,"height":320,"scaleDocument":true},{"id":222078,"name":"twitter_post","width":1024,"height":512,"scaleDocument":true},{"id":222079,"name":"twitter_profile","width":400,"height":400,"scaleDocument":true},{"id":222082,"name":"youtube_channel_art","width":2560,"height":1440,"scaleDocument":true},{"id":222081,"name":"youtube_channel_icon","width":800,"height":800,"scaleDocument":true},{"id":222083,"name":"youtube_display_ad","width":300,"height":250,"scaleDocument":true},{"id":222084,"name":"youtube_display_ad_long","width":300,"height":60,"scaleDocument":true},{"id":222085,"name":"youtube_overlay_ad","width":480,"height":70,"scaleDocument":true},{"id":222086,"name":"youtube_thumbnail","width":1280,"height":720,"scaleDocument":true},{"id":222005,"name":"billboard_ad","width":970,"height":250,"scaleDocument":true},{"id":222006,"name":"half_page_ad","width":300,"height":600,"scaleDocument":true},{"id":222008,"name":"large_leaderboard_ad_mobile","width":320,"height":100,"scaleDocument":false},{"id":222010,"name":"large_rectangle_ad","width":336,"height":280,"scaleDocument":false},{"id":222007,"name":"leaderboard_ad","width":728,"height":90,"scaleDocument":true},{"id":222011,"name":"medium_rectangle_ad","width":300,"height":250,"scaleDocument":false},{"id":222012,"name":"skyscraper_ad","width":120,"height":600,"scaleDocument":true},{"id":222009,"name":"small_leaderboard_ad_mobile","width":320,"height":50,"scaleDocument":false},{"id":222013,"name":"wide_skyscraper_ad","width":160,"height":600,"scaleDocument":false},{"id":222003,"name":"kindle_book_cover","width":1600,"height":2560,"scaleDocument":true},{"id":222002,"name":"ibook_cover","width":1600,"height":2560,"scaleDocument":true},{"id":222004,"name":"wattpad_book_cover","width":768,"height":1200,"scaleDocument":true},{"id":222193,"name":{"width":200,"height":200,"unit":"px"},"width":200,"height":200,"scaleDocument":true},{"id":222204,"name":{"width":250,"height":250,"unit":"px"},"width":250,"height":250,"scaleDocument":true},{"id":222195,"name":{"width":60,"height":468,"unit":"px"},"width":468,"height":60,"scaleDocument":true},{"id":222208,"name":{"width":90,"height":970,"unit":"px"},"width":970,"height":90,"scaleDocument":true},{"id":222179,"name":{"width":768,"height":1024,"unit":"px"},"width":1024,"height":768,"scaleDocument":true},{"id":222183,"name":{"width":800,"height":1280,"unit":"px"},"width":1280,"height":800,"scaleDocument":true},{"id":222181,"name":{"width":1024,"height":1280,"unit":"px"},"width":1280,"height":1024,"scaleDocument":true},{"id":222185,"name":{"width":1080,"height":1920,"unit":"px"},"width":1920,"height":1080,"scaleDocument":true},{"id":222186,"name":{"width":1600,"height":2560,"unit":"px"},"width":2560,"height":1600,"scaleDocument":true},{"id":222189,"name":"2k_qhd","width":2560,"height":1440,"scaleDocument":true},{"id":222102,"name":"4k_uhdtv","width":3840,"height":2160,"scaleDocument":true},{"id":222190,"name":"360p_ld_video","width":640,"height":360,"scaleDocument":true},{"id":222101,"name":"480p_sd_video","width":854,"height":480,"scaleDocument":true},{"id":222103,"name":"720p_hd_video","width":1280,"height":720,"scaleDocument":true},{"id":222100,"name":"1080p_hd_video","width":1920,"height":1080,"scaleDocument":true},{"id":222191,"name":"vertical_full_hd","width":1080,"height":1920,"scaleDocument":true},{"id":222192,"name":"vertical_hd_ready","width":720,"height":1280,"scaleDocument":true},{"id":222165,"name":"business_card","width":1050,"height":600,"scaleDocument":true},{"id":222166,"name":"calendar","width":1920,"height":1080,"scaleDocument":true},{"id":222167,"name":"card","width":1500,"height":2100,"scaleDocument":true},{"id":222168,"name":"cover_letter","width":2550,"height":3300,"scaleDocument":true},{"id":222028,"name":"email_header","width":600,"height":200,"scaleDocument":true},{"id":222169,"name":"flyer","width":2550,"height":3300,"scaleDocument":true},{"id":222170,"name":"invoice","width":2550,"height":3300,"scaleDocument":true},{"id":222171,"name":"postcard","width":1200,"height":1800,"scaleDocument":true},{"id":222172,"name":"poster","width":2550,"height":3300,"scaleDocument":false},{"id":222173,"name":"presentation","width":1920,"height":1080,"scaleDocument":true},{"id":222174,"name":"resume","width":2550,"height":3300,"scaleDocument":true},{"id":222244,"name":"coloring_sheet","width":2550,"height":3300,"scaleDocument":false},{"id":222214,"name":"planner","width":2550,"height":3300,"scaleDocument":false},{"id":222250,"name":"pinterest_shopping_ad_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222228,"name":"instagram_layout","width":3240,"height":3240,"scaleDocument":false},{"id":222236,"name":"short_email","width":1200,"height":1800,"scaleDocument":false},{"id":222240,"name":"worksheet","width":2550,"height":3300,"scaleDocument":false},{"id":222216,"name":"weekly_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222211,"name":"daily_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222230,"name":"food_menu","width":2550,"height":3300,"scaleDocument":false},{"id":222219,"name":"daily_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222238,"name":"long_email","width":1200,"height":3000,"scaleDocument":false},{"id":222215,"name":"daily_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222229,"name":"menu","width":2550,"height":3300,"scaleDocument":false},{"id":222239,"name":"tumblr_banner","width":3000,"height":1055,"scaleDocument":false},{"id":222248,"name":"pinterest_carousel_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222217,"name":"monthly_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222246,"name":"budget_planner","width":2550,"height":3300,"scaleDocument":false},{"id":222231,"name":"drink_menu","width":2550,"height":3300,"scaleDocument":false},{"id":222249,"name":"pinterest_carousel_ad_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222212,"name":"weekly_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222245,"name":"email_signature","width":600,"height":200,"scaleDocument":false},{"id":222237,"name":"medium_email","width":1200,"height":2400,"scaleDocument":false},{"id":222242,"name":"soundcloud_banner","width":2480,"height":520,"scaleDocument":false},{"id":222221,"name":"monthly_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222251,"name":"pinterest_collection_pin","width":1000,"height":1500,"scaleDocument":false},{"id":222227,"name":"business_plan","width":2550,"height":3300,"scaleDocument":false},{"id":222243,"name":"pinterest_idea_pin","width":1080,"height":1920,"scaleDocument":false},{"id":222213,"name":"monthly_calendar","width":2550,"height":3300,"scaleDocument":false},{"id":222226,"name":"gift_certificate","width":1800,"height":1200,"scaleDocument":false},{"id":222225,"name":"certificate","width":1800,"height":1200,"scaleDocument":false},{"id":222234,"name":"zoom_background","width":1920,"height":1080,"scaleDocument":false},{"id":222222,"name":"instagram_ad","width":1080,"height":1080,"scaleDocument":true},{"id":222223,"name":"instagram_bingo","width":1080,"height":1920,"scaleDocument":false},{"id":222210,"name":"facebook_shop","width":1600,"height":1200,"scaleDocument":false},{"id":222232,"name":"recipe_card","width":1800,"height":1200,"scaleDocument":false},{"id":222220,"name":"weekly_schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222218,"name":"schedule","width":2550,"height":3300,"scaleDocument":false},{"id":222224,"name":"instagram_question","width":1080,"height":1920,"scaleDocument":false},{"id":222247,"name":"pinterest_video_pin","width":1000,"height":1500,"scaleDocument":false}]')},wynV:function(e,t,n){"use strict";n.r(t),n.d(t,"CurvesFxPanelUnconnected",(function(){return H})),n.d(t,"CurvesFxDevPanel",(function(){return V}));var i=n("Gkqz"),a=n("q1tI"),s=n("LvDl"),o=n("bBtN"),r=n("hrAu"),h=n("b340"),c=n("8KIJ"),l=n("8ckf"),d=n("H2Kc"),u=n("RleE"),p=n("/MKj"),m=n("wHal"),g=n("luWw"),b=n("8pJm"),f=n("KwuG"),w=n("K0Bq"),v=n("m3rI");const x=["rgba(0,0,0,0.4)","rgba(255,0,0,0.4)","rgba(0,255,0,0.4)","rgba(0,0,255,0.4)"],O=["rgba(0,0,0,1)","rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)"],j={points:[]};class _ extends a.PureComponent{constructor(e){super(e),this.couldRemoveSelectedPoint=!1,this.getDocument=()=>this.document,this.getCanvasCoord=e=>{const t=this.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},this.offCanvas=e=>{const t=this.canvas.getBoundingClientRect();if(0===t.width&&0===t.height){if(e.clientX>this.canvas.width||e.clientX<0)return!0;if(e.clientY>this.canvas.height||e.clientY<0)return!0}else{if(e.clientX>t.right||e.clientX<t.left)return!0;if(e.clientY>t.bottom||e.clientY<t.top)return!0}return!1},this.canvasPointToGraphPoint=e=>function(e,t){const n=e;let i=t.x/e,a=(n-t.y)/n;return i*=255,a*=255,i=Object(m.a)(i,0,255),a=Object(m.a)(a,0,255),{x:i,y:a}}(this.props.canvasSize,e),this.handleMouseUp=e=>{this.shouldRemovePoint(e)&&this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.props.onFinishedDraggging&&this.props.onFinishedDraggging(),this.setState({selectedPoint:-1,mouseDown:!1,minX:null,maxX:null},this.updateGraph)},this.handleMouseDown=e=>{this.offCanvas(e)||(this.couldRemoveSelectedPoint=!1,this.setState({mouseDown:!0},()=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.handlePointClicked(t)||this.handleLineClicked(t)}))},this.handleMouseMove=e=>{const t=this.canvasPointToGraphPoint(this.getCanvasCoord(e));this.state.selectedPoint>=0?this.moveSelectedPoint(t):this.state.mouseDown?t.x<this.state.maxX&&t.x>this.state.minX&&this.handleLineClicked(t,!0):this.setPointCursor(t)||this.setLineCursor(t)||this.resetCursor()},this.setCanvas=e=>{e&&(this.canvas=e,v.i||(this.ctx=e.getContext("2d")))},this.state={cursor:"default",selectedPoint:-1,mouseDown:!1,maxX:null,minX:null}}componentDidMount(){this.document=document,this.document.addEventListener("mousedown",this.handleMouseDown),this.document.addEventListener("mouseup",this.handleMouseUp),this.document.addEventListener("mousemove",this.handleMouseMove),this.props.curves&&(this.setCanvasScale(),this.updateGraph())}componentWillUnmount(){this.document.removeEventListener("mousedown",this.handleMouseDown),this.document.removeEventListener("mouseup",this.handleMouseUp),this.document.removeEventListener("mousemove",this.handleMouseMove)}componentDidUpdate(e,t){Object(s.isEqual)(e,this.props)||this.props.curves&&this.updateGraph()}graphPointToCanvasPoint(e){return C(this.props.canvasSize,e)}interpolators(){const{curves:e=[]}=this.props;return e.map(e=>Object(g.e)("spline",Object(g.f)(e)))}currentInterpolator(){return this.interpolators()[this.props.curveIndex]}findPointClicked(e){const{curves:t=[],curveIndex:n}=this.props;return(t[n]||j).points.findIndex(Object(s.partial)(D,e))}isPointOnCurve(e){const t=e.x,{curves:n=[],curveIndex:i}=this.props,a=Object(g.e)("spline",Object(g.f)(n[i]||j));return D(e,{x:t,y:Object(m.a)(a.interpolate(t),0,255)})}shouldRemovePoint(e){if(!this.couldRemoveSelectedPoint)return!1;const t=this.props.curves[this.props.curveIndex];return!(this.state.selectedPoint<1||this.state.selectedPoint===t.points.length-1)&&(this.props.osFamily===w.b.mac&&e.metaKey||this.props.osFamily===w.b.windows&&e.ctrlKey)}handleLineClicked(e,t=!1){if(!this.isPointOnCurve(e)&&!t)return!1;const{curveIndex:n}=this.props,i=this.props.curves[n],{x:a,y:s}=e;let o=i.points.findIndex(e=>e.x>a);o<0&&(o=i.points.length);const r=o>0?i.points[o-1].x:0,h=o<i.points.length?i.points[o].x:255;return this.setState({selectedPoint:o,minX:r,maxX:h}),this.insertPoint(n,o,a,s),!0}handlePointClicked(e){const t=this.findPointClicked(e),{curveIndex:n}=this.props,i=this.props.curves[n],a=t>0?i.points[t-1].x:0,s=t+1<i.points.length?i.points[t+1].x:255;return this.setState({selectedPoint:t,maxX:s,minX:a}),this.couldRemoveSelectedPoint=t>-1,this.couldRemoveSelectedPoint}moveSelectedPoint(e){const{selectedPoint:t,minX:n,maxX:i}=this.state;if(t<0)return;let{x:a}=e;this.couldRemoveSelectedPoint=!1;const{curveIndex:s}=this.props,o=this.props.curves[s];!(t===o.points.length-1||0===t)&&(a>=i||a<=n)?(this.removePoint(this.props.curveIndex,this.state.selectedPoint),this.setState({selectedPoint:-1},this.updateGraph)):(0===t&&(a=Object(m.a)(a,n,i-1)),t===o.points.length-1&&(a=Object(m.a)(a,n+1,i)),this.setPoint(this.props.curveIndex,this.state.selectedPoint,a,e.y))}selectedPointCoords(){if(this.state.selectedPoint<0||!this.props.curves)return null;const{curves:e,curveIndex:t}=this.props;return e[t].points[this.state.selectedPoint]}setPointCursor(e){return!(this.findPointClicked(e)<0)&&(this.setState({cursor:"move"}),!0)}setLineCursor(e){return!!this.isPointOnCurve(e)&&(this.setState({cursor:"crosshair"}),!0)}resetCursor(){return this.setState({cursor:"default"}),!0}insertPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t)])}removePoint(e,t){this.updatePoints(e,0,0,(e,n)=>[...e.slice(0,t),...e.slice(t+1)])}setPoint(e,t,n,i){this.updatePoints(e,n,i,(e,n)=>[...e.slice(0,t),n,...e.slice(t+1)])}updatePoints(e,t,n,i){let a=this.props.curves,s=a[e],{points:o}=s;o=i(o,{x:Math.round(t),y:Math.round(n)}),s={points:o},a=[...a.slice(0,e),s,...a.slice(e+1)],this.props.setCurves(a)}setCanvasScale(){const e=Object(b.a)();this.ctx&&this.ctx.scale(e,e)}updateGraph(){if(this.ctx){const{canvasSize:e,curves:t,curveIndex:n}=this.props,i=this.selectedPointCoords();!function(e,t){e.clearRect(0,0,t,t)}(this.ctx,e),function(e,t){e.beginPath(),e.strokeStyle="rgba(200, 200, 200, 1)",e.lineWidth=1,e.moveTo(.5,t),e.lineTo(t+.5,0),e.stroke()}(this.ctx,e),function(e,t){const n=t/4;e.beginPath(),e.strokeStyle="rgba(200, 200, 200, 1)",e.lineWidth=.5;for(let i=1;i<=3;i++)e.moveTo(n*i,0),e.lineTo(n*i,t),e.moveTo(0,n*i+0),e.lineTo(t,n*i);e.stroke()}(this.ctx,e),function(e,t,n,i){const a=n,s=a-1;t.forEach((t,o)=>{e.beginPath(),e.strokeStyle=o===i?O[o]:x[o],e.lineWidth=1;for(let i=0;i<=a;i+=1){const a=i/s*255,o=t.interpolate(a),{x:r,y:h}=C(n,{x:a,y:o});0===i?e.moveTo(r,h):e.lineTo(r,h)}e.stroke()})}(this.ctx,this.interpolators(),e,n),function(e,t,n,i){n.points.forEach(n=>{const{x:a,y:s}=C(t,n);e.beginPath(),e.strokeStyle=O[i],e.lineWidth=1,e.arc(a,s,3,0,2*Math.PI),e.stroke()})}(this.ctx,e,t[n],n),i&&function(e,t,n){const{x:i,y:a}=n;e.beginPath(),e.strokeStyle="rgba(190, 190, 190, 1)",e.lineWidth=1,e.moveTo(0,a),e.lineTo(t,a),e.moveTo(i,0),e.lineTo(i,t),e.stroke()}(this.ctx,e,this.graphPointToCanvasPoint(i))}}render(){const{canvasSize:e}=this.props,{cursor:t}=this.state;return a.createElement("canvas",{ref:this.setCanvas,width:Object(b.a)()*e,height:Object(b.a)()*e,style:{width:e,height:e,cursor:t}})}}function C(e,t){const n=e;let i=t.x/255*n,a=e-t.y/255*n;return i=Object(m.a)(i,0,e),a=Object(m.a)(a,0,e),{x:i,y:a}}function D(e,t){const{x:n,y:i}=t,{x:a,y:s}=e;return Math.abs(a-n)<=10&&Math.abs(s-i)<=10}var y=Object(p.b)((function(e){return{osFamily:f.n(e)}}))(_),P=n("m373"),S=n("GZZW"),E=n("LboF"),M=n.n(E),k=n("cFMp"),A={insert:"head",singleton:!1},I=(M()(k.a,A),k.a.locals||{});const F=n("Hg4B").c.curves,B=Object.assign(Object.assign({},d.b),{curves:Object(g.b)(u.d.default),preset:"default",channel:"rgb"}),z=["rgb","red","green","blue"],L=Object(g.a)([[0,0],[255,255]]),R={points:[]};class H extends a.PureComponent{constructor(e){super(e),this.handlePresetChange=e=>{const t=Object(g.b)(u.d[e]||u.d.default);this.props.updateFxAttr("channel","rgb",!1),this.props.updateFxAttr("curves",t,!1);const n=u.b[e]||0;this.props.updateFxAttr("colorOverride",n,!1),this.props.updateFxAttr("preset",e,!1),this.props.commit()},this.handleChannelChange=e=>{const{curves:t}=this.props.uiFxAttrs,n=z.indexOf(e);if(n<0)return;this.props.updateFxAttr("channel",e,!1);const i=new Array(z.length);for(let a=0;a<z.length;a++)i[a]=t[a]||R,a===n&&0===i[a].points.length?i[a]=L:a!==n&&Object(s.isEqual)(i[a],L)&&(i[a]=R);Object(s.isEqual)(t,i)||this.props.updateFxAttr("curves",i,!1),this.props.commit()},this.setCurves=e=>{this.props.updateFxAttr("preset","custom",!1),this.props.updateFxAttr("curves",e,!1)},this.handleRawPointInputChanged=e=>{const t=this.parseRawPointInput(e.target.value);t?(this.setCurves(t),this.props.commit()):this.handlePresetChange("default")},this.onFinishedDraggging=()=>this.props.commit()}parseRawPointInput(e){const t=(e=e.replace(/\n/g,"")).match(/(\{.*?\})+/g);if(t&&4===t.filter(e=>!!e).length){const e=t.map(e=>{let t=(e=e.slice(1,-1)).split(/[\,\s]+/);t=t.filter(e=>""!==e);const n=t.map(Number);return Object(g.d)(n)}),[n,i,a,s]=e;return[n,s,a,i]}return null}renderRawPontInput(){return a.createElement("div",null,a.createElement("label",null,"Raw curve input"),a.createElement("textarea",{style:{width:"100%",height:100,overflow:"auto",fontFamily:"courier"},onChange:this.handleRawPointInputChanged}),a.createElement("pre",{style:{fontFamily:"courier",fontSize:8}},"Example (rgb, blue, green, red):",a.createElement("br",null),"{0,0,255,255}",a.createElement("br",null),"{0,0,120,128,255,240}",a.createElement("br",null),"{0,0,100,98,240,255}",a.createElement("br",null),"{0,0,64,90,96,100,128,170,255,255}"))}render(){const{channel:e,curves:t,preset:n}=this.props.uiFxAttrs,o=(()=>({rgb:Object(i.e)("effect","rgb"),red:Object(i.e)("effect","red"),green:Object(i.e)("effect","green"),blue:Object(i.e)("effect","blue")}))(),d=Object(u.a)();return a.createElement(r.a,Object.assign({},this.props,{title:Object(i.e)("effect","curves"),panelId:this.props.panelId||F,showMaskButton:!0}),a.createElement(c.b,{label:Object(i.e)("effect","presets"),onChange:this.handlePresetChange},Object(s.keys)(d).map((e,t)=>a.createElement(l.a,{key:t,selected:e===n,value:e,label:d[e]}))),a.createElement(c.b,{label:Object(i.e)("effect","channel"),isRow:!0,onChange:this.handleChannelChange,defaultValue:e},Object(s.keys)(o).map((t,n)=>a.createElement(l.a,{key:t,selected:t===e,value:t,label:o[t]}))),a.createElement("div",{className:I.curve_control_container},a.createElement(y,{curves:t,canvasSize:parseInt(I.curve_control_width,10),curveIndex:z.indexOf(e),setCurves:this.setCurves,onFinishedDraggging:this.onFinishedDraggging})),a.createElement(h.a,{key:"colorOverride",name:"colorOverride",label:Object(i.e)("effect","color_override"),min:0,max:100,formatter:h.b.roundedPercent,onChange:this.props.updateFxAttr}),a.createElement(h.a,{key:"fade",name:"fade",label:Object(i.e)("effect","fade"),min:S.m,max:S.d,formatter:h.b.roundedPercent,onChange:this.props.updateFxAttr}),this.props.enableRawPointInput?this.renderRawPontInput():null)}}t.default=Object(o.a)(H,{effectType:P.a.Curves,panelId:F,fxAttrDefaults:B,getUiFxAttrs:function({curves:e,preset:t,channel:n}){return{curves:e,preset:t,channel:n}}});const V=Object(o.a)((function(e){return a.createElement(H,Object.assign({},e,{enableRawPointInput:!0,panelId:"curves_dev"}))}),{effectType:P.a.Curves,panelId:"curves_dev",fxAttrDefaults:B})}}]);
//# sourceMappingURL=editor-panel-edits.c66401c6102425393504.bundle.js.map